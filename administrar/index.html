<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Administrar ‚Äî Nosso Projeto</title>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@300;400;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="../styles.css">
  <style>
    /* small page-specific styles */
    .team-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:12px;margin-top:16px}
    .person{display:flex;gap:12px;align-items:center;padding:10px;border-radius:10px;background:var(--card-bg);border:1px solid rgba(0,0,0,0.04)}
    .avatar-circle{width:56px;height:56px;border-radius:50%;overflow:hidden;display:inline-flex;align-items:center;justify-content:center;font-size:1.4rem;background:color-mix(in srgb,var(--card-bg) 88%, transparent);border:2px solid rgba(0,0,0,0.04)}
    .person .meta{display:flex;flex-direction:column}
    .role{font-size:0.85rem;color:var(--muted)}
    .status-dot{width:10px;height:10px;border-radius:50%;display:inline-block;margin-left:8px;vertical-align:middle;box-shadow:0 1px 2px rgba(0,0,0,0.08)}
    .online{background:#28a745}
    .offline{background:#c0392b}
    .filter-bar{display:flex;gap:8px;align-items:center;margin-top:12px}
    @media (max-width:700px){ .person{padding:8px} .avatar-circle{width:48px;height:48px} }
  </style>
</head>
<body>
  <header class="site-header">
    <div class="container header-inner">
      <div class="brand">
        <a class="logo" href="../index.html"><strong>De Olho No Lixo</strong><span class="tag">Administra√ß√£o de usu√°rios</span></a>
      </div>
      <nav class="actions">
        <button onclick="history.back()" class="btn">Voltar</button>
        <button id="adminThemeToggle" class="theme-toggle" aria-pressed="false" aria-label="Alternar tema" style="margin-left:10px;">
          <span class="icon moon" aria-hidden="true">üåô</span>
          <span class="icon sun" aria-hidden="true">‚òÄÔ∏è</span>
          <span class="sr-only">Alternar tema</span>
        </button>
      </nav>
    </div>
  </header>

  <main class="container" style="padding-top:20px;">
    <h2>Administrar ‚Äî Trabalhadores e Gerentes</h2>
    <p class="muted">Lista fict√≠cia de contas com status online/offline indicados por um ponto verde (online) ou vermelho (offline).</p>

    <div class="filter-bar">
      <label style="display:flex;align-items:center;gap:8px">
        Mostrar:
        <select id="filterSelect" class="btn" style="padding:6px;border-radius:8px;">
          <option value="all">Todos</option>
          <option value="workers">Trabalhadores</option>
          <option value="managers">Gerentes</option>
          <option value="online">Apenas online</option>
        </select>
      </label>
      <button id="refreshList" class="btn ghost">Atualizar</button>
    </div>

    <section style="margin-top:12px;">
      <h3>Gerentes</h3>
      <div id="managersGrid" class="team-grid" aria-live="polite"></div>
    </section>

    <section style="margin-top:18px;">
      <h3>Trabalhadores</h3>
      <div id="workersGrid" class="team-grid" aria-live="polite"></div>
    </section>
  </main>

  <footer class="site-footer">
    <div class="container"><p>&copy; <span id="year"></span> Nosso Projeto ‚Äî Administrar</p></div>
  </footer>

  <script>
    document.getElementById('year').textContent = new Date().getFullYear();

    // fictitious profiles (names, role, avatar emoji fallback, online boolean)
    const profiles = [
      {name:'Ana Souza', role:'manager', avatar:'üë©‚Äçüíº', online:true},
      {name:'Vinicius Ramos', role:'manager', avatar:'üë®‚Äçüíº', online:false},
      {name:'Carla Mendes', role:'worker', avatar:'üë©‚Äçüåæ', online:true},
      {name:'Jo√£o Pereira', role:'worker', avatar:'üë®‚Äçüîß', online:false},
      {name:'Mariana Lima', role:'worker', avatar:'üë©‚Äçüî¨', online:true},
      {name:'Rog√©rio Alves', role:'worker', avatar:'üë®‚Äçüåæ', online:false},
      {name:'Beatriz Costa', role:'manager', avatar:'üë©‚Äçüíª', online:true},
      {name:'Felipe Rocha', role:'worker', avatar:'üë®‚Äçüîß', online:false},
      {name:'Sofia Ara√∫jo', role:'worker', avatar:'üë©‚Äçüéì', online:true}
    ];

    function createPersonNode(p){
      const div = document.createElement('div');
      div.className = 'person';
      div.dataset.role = p.role;
      div.dataset.online = p.online ? '1' : '0';
      const avatar = document.createElement('div');
      avatar.className = 'avatar-circle';
      // render a neutral default avatar using initials (no emoji)
      const initials = (p.name||'').split(' ').filter(Boolean).map(n=>n[0]).slice(0,2).join('').toUpperCase() || 'US';
      avatar.textContent = initials;
      const meta = document.createElement('div');
      meta.className = 'meta';
      const top = document.createElement('div');
      top.innerHTML = `<strong>${p.name}</strong><span class="status-dot ${p.online ? 'online' : 'offline'}" title="${p.online ? 'Online' : 'Offline'}" aria-hidden="true"></span>`;
      const bottom = document.createElement('div');
      bottom.className = 'role';
      bottom.textContent = p.role === 'manager' ? 'Gerente' : 'Trabalhador';
      meta.appendChild(top); meta.appendChild(bottom);
      div.appendChild(avatar); div.appendChild(meta);
      return div;
    }

    function renderList(filter = 'all'){
      const mgr = document.getElementById('managersGrid');
      const wk = document.getElementById('workersGrid');
      mgr.innerHTML = ''; wk.innerHTML = '';
      let list = profiles.slice();
      if(filter === 'online') list = list.filter(p => p.online);
      else if(filter === 'workers') list = list.filter(p => p.role === 'worker');
      else if(filter === 'managers') list = list.filter(p => p.role === 'manager');
      list.forEach(p => {
        const node = createPersonNode(p);
        if(p.role === 'manager') mgr.appendChild(node); else wk.appendChild(node);
      });
      if(mgr.children.length === 0) mgr.innerHTML = '<div class="muted">Nenhum gerente encontrado.</div>';
      if(wk.children.length === 0) wk.innerHTML = '<div class="muted">Nenhum trabalhador encontrado.</div>';
    }

    document.getElementById('filterSelect').addEventListener('change', (e)=> renderList(e.target.value));
    document.getElementById('refreshList').addEventListener('click', ()=> {
      // simulate small random online state changes for demo refresh
      profiles.forEach(p => { if(Math.random() < 0.2) p.online = !p.online; });
      renderList(document.getElementById('filterSelect').value);
    });

    // initial render
    renderList('all');

    // theme toggle (consistent with other pages)
    (function(){
      const toggle = document.getElementById('adminThemeToggle');
      if(!toggle) return;
      function setTheme(isDark){
        document.body.classList.toggle('dark', isDark);
        toggle.setAttribute('aria-pressed', String(isDark));
        localStorage.setItem('darkMode', isDark ? '1' : '0');
      }
      setTheme(localStorage.getItem('darkMode') === '1');
      toggle.addEventListener('click', ()=> setTheme(!document.body.classList.contains('dark')));
    })();
  </script>
</body>
</html>
